{"version":3,"sources":["contexts/EthContext/EthContext.js","contexts/EthContext/state.js","contexts/EthContext/EthProvider.jsx","contexts/EthContext/useEth.js","components/NoticeNoArtifact.jsx","components/NoticeWrongNetwork.jsx","components/Intro/Title.jsx","assets/logo.jpeg","assets/banner.png","components/Intro/Banner.jsx","components/Footer.jsx","components/Buttons/StyledButton.jsx","components/Voters/Voters.jsx","components/Steps/Steps.jsx","components/Notification/Notification.jsx","components/ContractAddress/ContractAddress.jsx","components/NoticeWrongLogin.jsx","Main.jsx","App.jsx","fonts/Reactor_Sans_Regular.ttf","index.js"],"names":["EthContext","createContext","actions","initialState","artifact","web3","accounts","networkID","contract","reducer","state","action","type","data","Error","EthProvider","children","useReducer","dispatch","init","useCallback","Web3","givenProvider","eth","requestAccounts","net","getId","abi","address","networks","Contract","err","console","error","useEffect","tryInit","require","events","handleChange","forEach","e","window","ethereum","on","removeListener","Provider","value","useEth","useContext","NoticeNoArtifact","className","NoticeWrongNetwork","Title","Banner","id","src","logo","alt","bannerImage","Link","uri","text","href","target","rel","Footer","StyledButton","props","click","onClick","Voters","owner","currentStep","setNotification","voterEle","useRef","useState","inputAddValue","setInputAddValue","voterAddress","setVoterAddress","voterHasVoted","setVoterHasVoted","voterProposalVotedId","setVoterProposalVotedId","voterIsRegistered","setVoterIsRegistered","addresses","setAddresses","current","classList","add","flash","setTimeout","remove","clearTimeout","logAdresses","options","fromBlock","to","getPastEvents","then","r","toArray","k","returnValues","listAddresses","getVoter","voterRequested","innerText","methods","call","from","hasVoted","isRegistered","votedProposalId","addVoter","send","transac","VoterRegistered","eventChange","message","length","ref","map","ad","parseInt","placeholder","onChange","Steps","setCurrentStep","workflowStatusArray","workflowNextStepMappingMethods","goNextStep","nextStep","WorkflowStatusChange","newStatus","Notification","notificationBarEl","notification","active","ContractAddress","contractAddress","setContractAddress","getContractData","_address","NoticeWrongLogin","Main","getCurrentStep","workflowStatus","log","main","App","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.8aaaf5c3.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nconst EthContext = createContext();\n\nexport default EthContext;\n","const actions = {\n  init: \"INIT\",\n};\n\nconst initialState = {\n  artifact: null,\n  web3: null,\n  accounts: null,\n  networkID: null,\n  contract: null\n};\n\nconst reducer = (state, action) => {\n  const { type, data } = action;\n  switch (type) {\n    case actions.init:\n      return { ...state, ...data };\n    default:\n      throw new Error(\"Undefined reducer action type\");\n  }\n};\n\nexport {\n  actions,\n  initialState,\n  reducer\n};\n","import React, { useReducer, useCallback, useEffect } from \"react\";\nimport Web3 from \"web3\";\nimport EthContext from \"./EthContext\";\nimport { reducer, actions, initialState } from \"./state\";\n\nfunction EthProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const init = useCallback(\n    async artifact => {\n      if (artifact) {\n        const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n        const accounts = await web3.eth.requestAccounts();\n        const networkID = await web3.eth.net.getId();\n        const { abi } = artifact;\n        let address, contract;\n        try {\n          address = artifact.networks[networkID].address;\n          contract = new web3.eth.Contract(abi, address);\n        } catch (err) {\n          console.error(err);\n        }\n        dispatch({\n          type: actions.init,\n          data: { artifact, web3, accounts, networkID, contract }\n        });\n      }\n    }, []);\n\n  useEffect(() => {\n    const tryInit = async () => {\n      try {\n        const artifact = require(\"../../contracts/Voting.json\");\n        init(artifact);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    tryInit();\n  }, [init]);\n\n  useEffect(() => {\n    const events = [\"chainChanged\", \"accountsChanged\"];\n    const handleChange = () => {\n      init(state.artifact);\n    };\n\n    events.forEach(e => window.ethereum.on(e, handleChange));\n    return () => {\n      events.forEach(e => window.ethereum.removeListener(e, handleChange));\n    };\n  }, [init, state.artifact]);\n\n  return (\n    <EthContext.Provider value={{\n      state,\n      dispatch\n    }}>\n      {children}\n    </EthContext.Provider>\n  );\n}\n\nexport default EthProvider;\n","import { useContext } from \"react\";\nimport EthContext from \"./EthContext\";\n\nconst useEth = () => useContext(EthContext);\n\nexport default useEth;\n","function NoticeNoArtifact() {\n  return (\n    <p>\n      ⚠️Le contrat <span className=\"code\">Voting</span> n'a pas pu être trouvé.\n    </p>\n  );\n}\n\nexport default NoticeNoArtifact;\n","function NoticeWrongNetwork() {\n  return (\n    <p>\n      ⚠️ MetaMask is not connected to the same network as the one you deployed to.\n    </p>\n  );\n}\n\nexport default NoticeWrongNetwork;\n","function Title() {\n    return <h1>VOTES INTERNES</h1>;\n}\n\nexport default Title;\n","export default __webpack_public_path__ + \"static/media/logo.02c49f56.jpeg\";","export default __webpack_public_path__ + \"static/media/banner.35db5814.png\";","import Title from \"./Title\";\nimport logo from '../../assets/logo.jpeg'\nimport bannerImage from '../../assets/banner.png'\nimport './Banner.css'\n\nfunction Banner() {\n    return (\n        <div>\n            <div id=\"banner-container\" className=\"sub-container\">\n                <div id='voting-banner'>\n                    <img src={logo} alt='logo' id='voting-logo' />\n                    <Title />\n                </div>\n            </div>\n            <img src={bannerImage} alt='Banner' id='voting-banner-image' />\n        </div>\n    )\n}\n\nexport default Banner","import './Footer.css';\n\nfunction Link({ uri, text }) {\n  return <a href={uri} target=\"_blank\" rel=\"noreferrer\">{text}</a>;\n}\n\nfunction Footer() {\n  return (\n    <footer className=\"sub-container\">\n      <h2>Autres ressources</h2>\n      <Link uri={\"https://alyra.fr\"} text={\"Alyra\"} />\n    </footer >\n  );\n}\n\nexport default Footer;\n","import './StyleButton.css'\nfunction StyledButton(props) {\n  if(props.click){\n    return <button onClick={props.click}>{props.text}</button>\n  }\n  return <button>{props.text}</button>\n}\n\nexport default StyledButton;\n","import {useRef, useEffect, useState} from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport './Voters.css'\nimport StyledButton from \"../Buttons/StyledButton\";\n\nfunction Voters({owner,currentStep, setNotification }) {\n\n    const voterEle = useRef(null);\n\n    const { state: { contract, accounts } } = useEth();\n    const [inputAddValue,setInputAddValue] = useState('');\n    const [voterAddress,setVoterAddress] = useState('');\n    const [voterHasVoted,setVoterHasVoted] = useState(false);\n    const [voterProposalVotedId,setVoterProposalVotedId] = useState(0);\n    const [voterIsRegistered,setVoterIsRegistered] = useState(false);\n    const [addresses,setAddresses] = useState([]);\n\n\n    useEffect(() => {\n        voterEle.current.classList.add(\"flash\");\n        const flash = setTimeout(() => {\n            voterEle.current.classList.remove(\"flash\");\n        }, 300);\n        return () => {\n            clearTimeout(flash);\n        };\n    }, [voterAddress,voterHasVoted,voterProposalVotedId,voterIsRegistered]);\n\n    useEffect(() => {\n        logAdresses();\n    }, []);\n\n\n    const logAdresses = async () => {\n        let options = {\n            fromBlock: '0',\n            to: 'latest'\n        };\n        const listAddresses = await contract.getPastEvents('VoterRegistered', options).then(\n            (r)=>{\n                let toArray = [];\n                for (const k in r){\n                    toArray[k] = r[k].returnValues[0];\n                }\n                setAddresses(toArray);\n            }\n        );\n        return listAddresses;\n    };\n\n    const handleInputAddVoterChange = e => {\n        setInputAddValue(e.target.value);\n    };\n\n    const getVoter = async (e) => {\n        const voterRequested = e.target.innerText;\n        const value = await contract.methods.getVoter(voterRequested).call({ from: accounts[0] })\n        setVoterAddress(voterRequested);\n        setVoterHasVoted(value.hasVoted);\n        setVoterIsRegistered(value.isRegistered);\n        setVoterProposalVotedId(value.votedProposalId);\n    };\n\n    const addVoter = async () => {\n        try{\n            const transac = await contract.methods.addVoter(inputAddValue).send({ from: accounts[0] });\n            const eventChange = await transac.events.VoterRegistered.returnValues.voterAddress;\n            setNotification(`L'électeur ${eventChange} a bien été ajouté à la liste`);\n            logAdresses();\n        }catch(error){\n            console.error(error.message);\n        }\n    };\n\n    return (\n        <div className=\"component-section\">\n            <h2>les électeurs</h2>\n            <br/>\n            <p>Nous sommes transparents. En tant qu'électeur, à tout moment vous pouvez visualiser le vote d'un autre électeur.</p>\n            { addresses.length > 0 &&\n                <>\n                <br/>\n                <h3>Liste des électeurs</h3>\n                <p className='bold'>Cliquez sur un électeur pour voir les détails</p>\n            </>\n            }\n            <div className=\"section-block\">\n                <div id=\"voter-container\" ref={voterEle}>\n                    {voterAddress.length > 0 &&\n                        <>\n                            Electeur: <strong>{voterAddress}</strong>\n                            <br/>\n                            Enregistré: <strong>{voterIsRegistered ? \"oui\" : \"non\"}</strong>\n                            <br/>\n                            A voté: <strong>{voterHasVoted ? \"oui\" : \"non\"}</strong>\n                            <br/>\n                            Proposition votée: <strong>{voterProposalVotedId}</strong>\n                        </>\n                    }\n                </div>\n            </div>\n            {addresses.length === 0 &&\n                <>\n                <div className=\"bold\">\n                    Aucun électeur n'a été enregistré\n                </div>\n                <br />\n                </>\n            }\n            {addresses.length > 0 &&\n                <div className=\"list-voters-container\">\n                    {addresses.map((ad) => (\n                        <div onClick={getVoter} className=\"list-voters\" key={ad}>{ad}</div>\n                    ))}\n                    <br/>\n                </div>\n            }\n            { parseInt(currentStep)  === 0 && accounts[0] === owner &&\n             <div id='add-votet-container'>\n                <h3>Ajouter un électeur</h3>\n\n                <p>Attention, seul le propriétaire peut ajouter un électeur</p>\n\n                <div  className=\"section-block\">\n                    <input\n                        type=\"text\"\n                        placeholder=\"address, ex: 0xdf.......\"\n                        value={inputAddValue}\n                        onChange={handleInputAddVoterChange}\n                    />\n                    <StyledButton click={addVoter} text=\"Ajouter un électeur\" />\n                </div>\n             </div>\n            }\n        </div>\n    )\n}\n\nexport default Voters;\n","import './Steps.css'\nimport StyledButton from \"../Buttons/StyledButton\";\nimport useEth from \"../../contexts/EthContext/useEth\";\n\nfunction Steps({setCurrentStep, currentStep, workflowStatusArray, setNotification}) {\n\n    const { state: { contract, accounts } } = useEth();\n    const workflowNextStepMappingMethods =  {\n        1:'startProposalsRegistering',\n        2:'endProposalsRegistering',\n        3:'startVotingSession',\n        4:'endVotingSession',\n        5:'tallyVotes'\n    }\n\n    const goNextStep = async () => {\n        try{\n            const nextStep = parseInt(currentStep)+1;\n            const transac = await contract.methods[workflowNextStepMappingMethods[nextStep]]().send({ from: accounts[0] });\n            const eventChange = await transac.events.WorkflowStatusChange.returnValues.newStatus;\n            setNotification(workflowStatusArray[nextStep]);\n            setCurrentStep(nextStep);\n        }catch (error){}\n    }\n\n    return (\n        <div className=\"component-section\">\n            <h2>Le déroulement du vote</h2>\n            <br/>\n            <h3 className=\"bold\" id=\"current-step\">{workflowStatusArray[currentStep]}</h3>\n            <br/>\n            <p>\n                Le propriétaire du contrat ouvrira la session des propositions après avoir ajouté les électeurs.\n                Une fois la sessions des propositions closes, l'ouverture de la session de vote aura lieu.\n                la proposition ayant récolté le plus de votes sera retenue.\n            </p>\n\n            {parseInt(currentStep)  !== 5 &&\n                <StyledButton click={goNextStep} text=\"Terminer l'étape actuelle\"/>\n            }\n        </div>\n    )\n}\n\nexport default Steps;\n","import \"./Notification.css\"\nimport {useEffect, useRef} from \"react\";\n\nfunction Notification(props) {\n\n  const notificationBarEl = useRef(null);\n\n  useEffect(()=>{\n    {props.notification !== \"\"  &&\n      notificationBarEl.current.classList.add(\"active\");\n      const active = setTimeout(() => {\n        notificationBarEl.current.classList.remove(\"active\");\n      }, 5000);\n      return () => {\n        clearTimeout(active);\n      };\n    }\n  },[props.notification]);\n\n  return (\n    <div id='notification' ref={notificationBarEl}>\n        {props.notification}\n    </div>\n  );\n}\n\nexport default Notification;\n","import \"./ContractAddress.css\"\nimport {useEffect, useState} from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\n\nfunction ContractAddress() {\n  const [contractAddress,setContractAddress] = useState(null);\n  const { state: { contract } } = useEth();\n\n  useEffect(() => {\n    getContractData();\n  },[contractAddress])\n\n  const getContractData = async () => {\n    try {\n      setContractAddress(contract._address)\n    }catch (error){\n    }\n  }\n  return <div id=\"contract-address-reminder\" className=\"sub-container\"><span className=\"bold\">L'adresse du contrat est : </span >\n          <a href={ \"https://ropsten.etherscan.io/address/\" + contractAddress}>\n            <span className=\"contract-address\">{contractAddress}</span>\n          </a>\n      </div>\n}\n\nexport default ContractAddress;\n","function NoticeWrongLogin() {\n  return (\n    <p>\n      ⚠️ MetaMask is not connected.\n    </p>\n  );\n}\n\nexport default NoticeWrongLogin;\n","import {useState} from \"react\";\nimport useEth from \"./contexts/EthContext/useEth\";\nimport NoticeNoArtifact from \"./components/NoticeNoArtifact\";\nimport NoticeWrongNetwork from \"./components/NoticeWrongNetwork\";\nimport Banner from \"./components/Intro/Banner\";\nimport Footer from \"./components/Footer\";\nimport Voters from \"./components/Voters/Voters\";\nimport Steps from \"./components/Steps/Steps\";\nimport Notification from \"./components/Notification/Notification\";\nimport ContractAddress from \"./components/ContractAddress/ContractAddress\";\nimport NoticeWrongLogin from \"./components/NoticeWrongLogin\";\n\nfunction Main() {\n  const owner = '0xf0328078D984691fd7385BeFE58d7fB2691ccE3a';\n  const { state: { contract, accounts } } = useEth();\n  const { state } = useEth();\n  const [notification, setNotification] = useState('');\n  const workflowStatusArray =  [\n      'Etape d\\'enregistrement des électeurs ouverte',\n      'Etape des propositions ouverte',\n      'Etape des propositions terminée',\n      'Etape des votes ouverte',\n      'Etape des votes terminée',\n      'Les votes ont été comptabilisés'\n  ];\n  const [currentStep,setCurrentStep] = useState(null);\n\n  const getCurrentStep = async () => {\n      try{\n           await contract.methods.workflowStatus().call({ from: accounts[0] }).then(\n              (r) => {\n                  setCurrentStep(r);\n                  console.log(state)\n              }\n          );\n      }catch (error){}\n  }\n  getCurrentStep();\n\n  const main =\n    <>\n        <ContractAddress />\n        <Steps workflowStatusArray={workflowStatusArray} currentStep={currentStep} setCurrentStep={setCurrentStep} setNotification={setNotification} />\n        <Voters owner={owner} workflowStatusArray={workflowStatusArray} currentStep={currentStep} setNotification={setNotification} />\n    </>;\n\n  return (\n    <div className=\"main\">\n        <Notification notification={notification} />\n        <Banner />\n        {\n            !state.artifact ? <NoticeNoArtifact /> :\n                !state.contract.accounts ? <NoticeWrongLogin /> :\n                    !state.contract ? <NoticeWrongNetwork /> :\n                    main\n        }\n        <Footer />\n    </div>\n  );\n}\n\nexport default Main;\n","import { EthProvider } from \"./contexts/EthContext\";\nimport \"./App.css\";\nimport Main from \"./Main\";\n\nfunction App() {\n  return (\n    <EthProvider>\n      <div id=\"App\" >\n        <div className=\"container\">\n            <Main />\n        </div>\n      </div>\n    </EthProvider>\n  );\n}\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/Reactor_Sans_Regular.4f2f5c2f.ttf\";","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport './fonts/Reactor_Sans_Regular.ttf';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}